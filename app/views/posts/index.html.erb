<div class="cover-index">
  <div class="container">
    <div class="row justify-content-center">
      <h1 class="font-weight-normal mt-3">旅行投稿一覧</h1>
    </div>
    <div class="row justify-content-center">
      <% @posts.each do |post| %>
      <div class="one-post">
        <%= link_to post_path(post) do %>
        <p class="caption">ユーザ名</p>

        <p class="caption mb-0"><%= post.location %></p>
        <p class="caption"><%= "#{post.comments.count} コメント" %></p>
        <% end %>
      </div>
      <% end %>
    </div>
    <%= paginate @posts %>
  </div>
</div>

<hr>

<% @posts.each do |post| %>
  <hr>
  <p><span>email: </span><%=link_to post.user.email, user_path(post.user.id) %></p>
  <p><span>ツイート内容: </span><%=link_to post.body, post_path(post.id) %></p>
  <% if user_signed_in? %>
    <% if post.favorited_by?(current_user) %>
        <p><span>お気に入り解除: </span><%=link_to post.favorites.count, post_favorites_path(post.id), method: :delete %></p>
    <% else %>
        <p><span>お気に入り登録: </span><%=link_to post.favorites.count, post_favorites_path(post.id), method: :post %></p>
    <% end %>

  <% if current_user != post.user %>
    <% if post.user.followed_by?(current_user) %>
        <p><%=link_to "フォロー済み", user_relationships_path(post.user.id), method: :delete %></p>
    <% else %>
        <p><%=link_to "フォローする", user_relationships_path(post.user.id), method: :post %></p>
    <% end %>
  <% end %>

  <% else %>
    <p><span>お気に入り数: </span><%= post.favorites.count %></p>
  <% end %>
<% end %>
